---
layout: post
title: Recording a screencast in Linux
date: '2016-01-18T03:01:00.001-08:00'
author: Ladislav Slez√°k
tags: 
modified_time: '2016-01-18T03:17:55.071-08:00'
blogger_id: tag:blogger.com,1999:blog-6535501136403374362.post-2738310770523049845
blogger_orig_url: http://lslezak.blogspot.com/2016/01/recording-screencast-in-linux.html
---

<h2>Screencasts</h2><blockquote class="tr_bq"><i>A picture is worth a thousand words.</i></blockquote>And what if you want to make it even better? What about using an animated image to show some action or progress? Like this one:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://cloud.githubusercontent.com/assets/907998/11747115/b7ca1362-a021-11e5-98ed-6111d9fa1410.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://cloud.githubusercontent.com/assets/907998/11747115/b7ca1362-a021-11e5-98ed-6111d9fa1410.gif" /></a></div><br /><br />Personally I like the animated images on the main project pages at GitHub. See for example <a href="https://github.com/akonwi/git-plus">git-plus</a>&nbsp;or&nbsp;<a href="https://github.com/thomaslindstrom/color-picker">color-picker</a>&nbsp;Atom plugins. (Or my <a href="https://github.com/lslezak/build-rake">build-rake</a>&nbsp;plugin displayed above.)<br /><br />The question is how to record such <a href="https://en.wikipedia.org/wiki/Screencast" target="_blank">screencasts</a>?<br /><h3></h3><div><br /></div><h3>Screen Recording in Linux</h3><div>There are several tools for Linux which can be used for screen recording. It also depends it you want to create a standard video file (e.g. for uploading to youtube) or an animated image which can be embedded into web pages.</div><h3></h3><div><br /></div><h3>Standard Video</h3><div>For recording the desktop to a standard video file (like in AVI or WEBM format) you can use the ffmpeg tool.<br /><br />To record the screen with audio capture (via PulseAudio) to a WebM file (using open codecs VP9 for video and Opus for audio) use command like this:.<br /><br /></div><div><div class="highlight highlight-source-shell" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;"><pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">ffmpeg -f pulse -i default -video_size <width>x<height> -framerate 15 -f x11grab -i :0.0+&lt;width</height></width><span style="font-size: 13.6px; line-height: 1.45;">&gt;</span><width style="font-size: 13.6px; line-height: 1.45;"><height><x_offset>,</x_offset></height></width><span style="font-size: 13.6px; line-height: 1.45;">&lt;</span><span style="font-size: 13.6px; line-height: 1.45;">height</span><span style="font-size: 13.6px; line-height: 1.45;">&gt;</span><y_offset style="font-size: 13.6px; line-height: 1.45;"> -b:v 1M -crf 10 output.webm</y_offset></pre></div><div style="box-sizing: border-box; margin-bottom: 16px;"><span style="color: #333333; font-family: inherit;"><span style="line-height: 25.6px;">See these links for more details:</span></span></div><ul style="box-sizing: border-box; color: #333333; font-size: 16px; line-height: 25.6px; margin-bottom: 16px; margin-top: 0px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;"><a href="https://trac.ffmpeg.org/wiki/Capture/Desktop" style="box-sizing: border-box; color: #4078c0; text-decoration: none;"><span style="font-family: inherit;">https://trac.ffmpeg.org/wiki/Capture/Desktop</span></a></li><li style="box-sizing: border-box;"><a href="https://trac.ffmpeg.org/wiki/Encode/VP8" style="box-sizing: border-box; color: #4078c0; text-decoration: none;"><span style="font-family: inherit;">https://trac.ffmpeg.org/wiki/Encode/VP8</span></a></li><li style="box-sizing: border-box;"><a href="https://www.ffmpeg.org/ffmpeg-devices.html#x11grab" style="box-sizing: border-box; color: #4078c0; text-decoration: none;"><span style="font-family: inherit;">https://www.ffmpeg.org/ffmpeg-devices.html#x11grab</span></a></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #4078c0; font-family: inherit; text-decoration: none;"><a href="http://www.lxtips.com/2011/07/single-window-screen-capture-script.html" style="box-sizing: border-box; color: #4078c0; text-decoration: none;">http://www.lxtips.com/2011/07/single-window-screen-capture-script.html</a></span></li></ul><h3></h3><h3>Animated Image</h3></div><div>If you want to create an animated image you need to use the <a href="https://en.wikipedia.org/wiki/GIF" target="_blank">GIF image format</a> (you could use an <a href="https://en.wikipedia.org/wiki/APNG" target="_blank">animated PNG</a> as well, but that is not supported by all browsers).</div><div><br /></div><div>You could use <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">ffmpeg</span> as well (just use <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">output.gif</span>&nbsp;file name), but in my tests the resulting image is too big for using on web pages. It's probably caused by the fact that ffmpeg uses dithering for images with 24bit colors which obviously leads to less compression. Maybe there are some options to tune this, but still writing the position of the recorded area manually is a bit uncomfortable...</div><div><br /></div><div>Then I found the <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">byzanz</span> tool. It's by default available to install in the openSUSE distribution, simply run:</div><div><br /></div><div><pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">sudo zypper in byzanz xwininfo<br /></pre></div><div><br /></div><div>(This will also install&nbsp;<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">xwininfo</span> package, see later why.)</div><div><br /></div><div>Now you can record the desktop in a similar way like <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">ffmpeg</span>, see the accepted parameters:</div><div><span style="background-color: #f7f7f7; color: #333333; font-family: &quot;consolas&quot; , &quot;liberation mono&quot; , &quot;menlo&quot; , &quot;courier&quot; , monospace; font-size: 13.6px; line-height: 1.45;"><br /></span></div><div><pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">byzanz-record --help</pre></div><div><span style="background-color: #f7f7f7; color: #333333; font-family: &quot;consolas&quot; , &quot;liberation mono&quot; , &quot;menlo&quot; , &quot;courier&quot; , monospace; font-size: 13.6px; line-height: 1.45;"><br /></span></div>Again, you need to manually enter the coordinates of the recorded area if you do not want to record complete screens. And that's not trivial... Fortunately I found this nice&nbsp;<a href="https://gist.github.com/lucy/3042755"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">byzanz-record-window</span></a>&nbsp;helper script.<br /><div><br /></div><div>You can install it locally via these commands:</div><div><br /></div><div><pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">cd ~/bin<br />wget https://gist.githubusercontent.com/lucy/3042755/raw/eda2b85b51779affbc392a2bb3f1b60ed5fe98ff/byzanz-record-window<br />chmod a+x <span style="font-size: 13.6px; line-height: 1.45;">byzanz-record-window</span></pre><div><br /></div><div>The script uses the <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">xwinfo</span> helper to obtain the coordinates of the selected window. They are then passed to the <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">byzanz-record</span><span style="font-family: inherit;"> tool</span>.</div><div><br /></div><div>I'd suggest to use about 3 second delay before starting the actual recording to have some time to get ready (switch to the correct window, position the mouse cursor, etc...).</div><div><br /></div><div>So the final recording command would look like this:</div><div><br /></div><div><pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">byzanz-record-window --delay=3 --duration=5 screencast.gif<br /></pre></div><div><br /></div><div><br /></div><h3>Final Notes</h3></div><div>Be prepared to repeat the recording several times, you'll probably need more than a single attempt. I also found it easier to repeat the recording than editing and rebuilding the animation just to remove the useless parts at the beginning or the end.<br /><br />Check also the resulting image size, for embedding into web pages it should be as small as possible. If it is too big then decrease the window size, do a shorter recording or avoid too many changes in the image.</div><div><br /></div>