---
layout: post
title: Git status in bash prompt - bash-git-prompt
date: '2015-02-09T02:32:00.000-08:00'
author: Ladislav Slez√°k
tags: 
modified_time: '2015-02-09T02:33:27.531-08:00'
thumbnail: http://2.bp.blogspot.com/-JJ5QXeM1tLo/VNiEn6GfhvI/AAAAAAAAM5Y/EWtT54I6ob4/s72-c/bash-git-prompt1.png
blogger_id: tag:blogger.com,1999:blog-6535501136403374362.post-1354303991883768133
blogger_orig_url: http://lslezak.blogspot.com/2015/02/git-status-in-bash-prompt-bash-git.html
---

<h2>Do you use Git?</h2><br />Have you ever committed a change into a wrong branch? Have you ever started working on a feature/bug fix without pulling from remote and thus need to rebase and resolve conflicts later? Have you ever forgotten your stashed changes?<br /><br />With bash-git-prompt tool that's gone!<br /><br /><h3>The tools</h3><br />Recently I was looking for some tool which would help me to avoid the problems mentioned above.<br /><br />At first I tried&nbsp;<a href="https://github.com/twolfson/sexy-bash-prompt">sexy-bash-prompt</a>, but I didn't like the default scheme, it was too different to the usual openSUSE bash command prompt. I tried to customize it, although the code allows some customization I could not make it look like the openSUSE default.<br /><br />Then I tried&nbsp;<a href="https://github.com/magicmonty/bash-git-prompt">bash-git-prompt</a>.&nbsp;This tool is similar to sexy-bash-prompt, but provides more details about the git status. What I really like:<br /><br /><ul><li>It prints more details about the current Git status (number of commits behind/ahead of remoter, count of stashed changes,...)</li><li>It periodically fetches the status from remote, if there are new commits on the remote you will be noticed (the check is run every 5 minutes, but it's configurable and can be completely disabled)</li><li>Displays the exit status of the last command, if a command fails you'll see a red X mard and the exit status number. So a failure is more visible on the terminal.</li></ul>I really recommend to give it a try if you use Git from command line, it can save you same headache...<br /><br /><h3>Installation</h3><br />Installation is really easy, just run<br /><br /><pre style="background-color: black; color: white; padding: 10px;">cd ~<br />git clone&nbsp;https://github.com/magicmonty/bash-git-prompt.git .bash-git-prompt<br /></pre><br />If you want to update it later just run "git pull" in that directory.<br /><h3></h3><h3><br /></h3><h3>openSUSE theme</h3><div><br />Again the default style is too different, but it turned out that the color and the style can easily changed and bash-git-prompt already provides several styles out of box.<br /><br /></div><div>So I decided to create a new style which would mimic the default openSUSE bash prompt as close as possible so you would not notice that you are using&nbsp;bash-git-prompt if you are outside a Git repository.</div><div><br /></div><div>To use&nbsp;bash-git-prompt with the openSUSE theme simply add this to your ~/.bashrc file:</div><div><br /></div><div><div><pre style="background-color: black; color: white; padding: 10px;">GIT_PROMPT_THEME=Single_line_openSUSE<br />source ~/.bash-git-prompt/gitprompt.sh</pre></div></div><div><br /></div><div>The next time you start a new shell session&nbsp;bash-git-prompt will be automatically loaded.</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-JJ5QXeM1tLo/VNiEn6GfhvI/AAAAAAAAM5Y/EWtT54I6ob4/s1600/bash-git-prompt1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-JJ5QXeM1tLo/VNiEn6GfhvI/AAAAAAAAM5Y/EWtT54I6ob4/s1600/bash-git-prompt1.png" height="164" width="320" /></a></div>Except the exit status at the beginning of the line it looks like the usual openSUSE bash prompt.<br /><br />Let's see how it can help with Git:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-w3AezCWkDjg/VNiEn9U_rpI/AAAAAAAAM5c/6g_3G7Wpsps/s1600/bash-git-prompt2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-w3AezCWkDjg/VNiEn9U_rpI/AAAAAAAAM5c/6g_3G7Wpsps/s1600/bash-git-prompt2.png" height="164" width="320" /></a></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><b>Note:</b> If you do not like the exit status indicator at the beginning of the line then use&nbsp;<span style="font-family: Courier New, Courier, monospace;">Single_line_NoExitState_openSUSE</span> theme instead.</div><h3></h3><h3>Help</h3><div><br />You can run&nbsp;<span style="font-family: Courier New, Courier, monospace;">git_prompt_help</span> to see what the used symbols mean:</div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-glFm5LppDkU/VNiGfwp_RdI/AAAAAAAAM5s/ycHGP0VHylA/s1600/bash-git-prompt3.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-glFm5LppDkU/VNiGfwp_RdI/AAAAAAAAM5s/ycHGP0VHylA/s1600/bash-git-prompt3.png" height="218" width="320" /></a></div><br />&nbsp;There are also some examples displayed by&nbsp;<span style="font-family: Courier New, Courier, monospace;">git_prompt_examples</span> command:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-BY0UwxypFxo/VNiGf_1bmXI/AAAAAAAAM50/92aht7tO-zc/s1600/bash-git-prompt4.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-BY0UwxypFxo/VNiGf_1bmXI/AAAAAAAAM50/92aht7tO-zc/s1600/bash-git-prompt4.png" height="218" width="320" /></a></div><br />And if you want to change the colors used in the style you can use&nbsp;<span style="font-family: Courier New, Courier, monospace;">git_prompt_color_samples</span> to see all colors available (note: this depends on the terminal configuration, the colors might not be the same in a different terminal):<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-Uk1BbidtLtI/VNiGf_iyaCI/AAAAAAAAM5w/90H4Jcx_YgA/s1600/bash-git-prompt5.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-Uk1BbidtLtI/VNiGf_iyaCI/AAAAAAAAM5w/90H4Jcx_YgA/s1600/bash-git-prompt5.png" height="285" width="320" /></a></div><div><br /></div><h3>Note for Midnight Commander Users</h3><div><br />I noticed that&nbsp;bash-git-prompt does not work correctly when you use Midnight Commander ("mc"). The problem is that it overwrites the <span style="font-family: Courier New, Courier, monospace;">PROMPT_COMMAND</span> shell variable (see more details at</div><div><a href="https://www.midnight-commander.org/ticket/2027">https://www.midnight-commander.org/ticket/2027</a>).</div><div><br /></div><div>My workaround it to define an alias in <span style="font-family: Courier New, Courier, monospace;">~/.alias</span> file:<br /><br /></div><div><pre style="background-color: black; color: white; padding: 10px;">alias gp="source ~/.bash-git-prompt/gitprompt.sh"<br /></pre></div><div><br />and run "gp" whenever you want to use the bash-git-prompt functionality in mc subshell.</div><div><br /></div><div>(The ticket above contains a patch for mc, but you would need to recompile it from sources and maintain it yourselves, i.e. keep it up to date if a security fix is released...)</div>